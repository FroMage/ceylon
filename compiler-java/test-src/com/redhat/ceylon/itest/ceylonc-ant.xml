<project name="Ceylonc Ant Task test" >
  <!--<property name="ceylon.ant.dir" value="com/redhat/ceylon/ant/${module.com.redhat.ceylon.compiler.version}"/>
  <property name="ceylon.ant.jar" value="${ceylon.ant.dir}/com.redhat.ceylon.ant-${module.com.redhat.ceylon.compiler.version}.jar"/>
  <property name="ceylon.ant.lib" location="${ceylon.repo.dir}/${ceylon.ant.jar}"/>-->
  <target name="-init">
      <echo message="ant.home: ${ant.home}"/>
      <echo message="ant.file: ${ant.file}"/>
      <echo message="src: ${arg.src}"/>
      <echo message="out: ${arg.out}"/>
    </target>
  
  <target name="ant-tasks" depends="-init">
    <!--<path id="ant-tasks">
      <pathelement location="${ceylon.ant.lib}"/>
    </path>-->
    <taskdef name="ceylonc" classname="com.redhat.ceylon.ant.Ceylonc" /><!-- classpathref="ant-tasks"-->
    <taskdef name="ceylond" classname="com.redhat.ceylon.ant.Ceylond" /><!-- classpathref="ant-tasks"-->
    <taskdef name="ceylon" classname="com.redhat.ceylon.ant.Ceylon" /><!-- classpathref="ant-tasks"-->
  </target>
      
  <target name="foo-alone" depends="ant-tasks">
    <ceylonc
      executable="${script.ceylonc}"
      src="${arg.src}"
      out="${arg.out}"
      verbose="${arg.verbose}">
        <module name="com.example.foo"/>
    </ceylonc>
  </target>

  <target name="foo-file" depends="ant-tasks,foo-alone">
    <echo message="Hello, world"/>
    <ceylonc
      executable="${script.ceylonc}"
      src="${arg.src}"
      out="${arg.out}"
      verbose="${arg.verbose}">
        <include name="com/example/foo/a/foo.ceylon"/>
    </ceylonc>
  </target>

  <target name="bar-alone" depends="ant-tasks">
    <ceylonc
      executable="${script.ceylonc}"
      src="${arg.src}"
      out="${arg.out}">
       <module name="com.example.bar"/>
    </ceylonc>
  </target>

  <target name="foo-and-bar" depends="ant-tasks">
    <ceylonc
      executable="${script.ceylonc}"
      src="${arg.src}"
      out="${arg.out}">
       <module name="com.example.foo"/>
       <module name="com.example.bar"/>
    </ceylonc>
  </target>

</project>